# nimbora-hackathon

## Yield DEX

### Problem

Users want to interact with DEFI protocols to earn yield and increase their portfolio. Ethereum Mainnet is the most secure and one of the web3 chains that contain the biggest number of DEFI protocols and bigger liquidity in the ecosystem. A famous chain means lots of users, which means higher gas fees. Interacting with a DEFI protocol becomes expensive as the gas unit required to do a simple stake, swap, or withdraw can cost $$ or $$$ depending on the gas price.

### Solution

Nimbora Sync Yield allow users to access L1 yields from L2 without delay, additional gas fees and liquidity requirements. This is make possible by emiting a share token representing a layer one yield token. Share price is updated at each report, which inform L2 of the yield generated by the L1 strategy.

### Contact architecture

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/6166fa04-7686-417f-be01-cf7af137c427/c3799289-9933-4541-af42-44f8a8617c9b/Untitled.png)

### L2 Contracts

#### Pooling Manager

The pooling manager plays an intermediate role with L2 stratgies and L1 communication. The idea is to significantly reduce gas cost on L1 by hashing all of the data and mutualising bridge transfer. He is also responsible of registering all availaible strategies and is the only one able to process reports those. although he is processing all at once, he is also able to process only one report individually so broken strategy has not impact on others. 

#### Pooling Factory

The pooling factory is the contract used to deploy new “strategy packages”: token, token unstake and token manager, those contracts are the same for any strategies.

#### N-yield Token Manager

The token manager contains all the logic for token accountability through strategy report, setting the share price at each epoch. It is also the entrypoint for deposit and withdraw, only this contract is able to mint or burn token or unstake token 

#### N-yield Token

The nimbora yield token is the representation of the l1 strategy yield bearing token, increasing in value at each epoch. Once minted, it can be used in DeFi through the starknet ecosystem.

#### N-yield unstake nft

The nimbora yield unstake token is the representation of the token locked waiting for being withdrawn. 

### L1 Contracts

#### Pooling Manager

The pooling manager plays an intermediate role with L1 strategies and L2 communication. The contract receives a payload of data, containing all the information required to cover L2 strategies requests: deposit more in a strategy, inform the underlying NAV or withdraw some assets. 

#### Strategy handler

The strategy handler is an adapter used to interact with strategies, it receives a data of payload similar for each handler and processes the request before returning the new NAV of the strategy and potentially some ETH to bridge.

## L2 Yield Dex Contracts

Nimbora Yield allows users to access L1 yields from L2 without delay, additional gas fees, and liquidity requirements. This is made possible by emitting a share token representing a layer one yield token. Share price is updated at each report, which informs L2 of the yield generated by the L1 strategy.

You will find the L2 contracts [here](https://github.com/0xSpaceShard/nimbora_yields_l2)
Follow the `README` to compile, declare, and deploy the contracts.

Contracts are located under the `./src` folder, main contracts are : 
  - PoolingManager: The pooling manager plays an intermediate role with L2 strategies and L1 communication.

  - Factory: The pooling factory is the contract used to deploy new “strategy packages”: token and token manager, those contracts are the same for any              strategies.

  - TokenManager: The token manager contains all the logic for token accountability through a strategy report, setting the share price at each epoch. It              is also the entry point for deposit and withdraw, only this contract can mint or burn token
    
## L1 Yield Dex Contracts
...

## Off-chain services
Nimbora Yield DEX off-chain services allow for the indexing and processing of L1 and L2 reports. For more details, please check this [link](https://github.com/0xSpaceShard/nimbora-relayer-public).
...
